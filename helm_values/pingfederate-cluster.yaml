global:
  envs:
    PING_IDENTITY_ACCEPT_EULA: "YES"
    MUTE_LICENSE_VERIFICATION: "true"
    PF_ENGINE_PUBLIC_HOSTNAME: "auth.identity.net.br"
    PF_ENGINE_PUBLIC_PORT_HTTPS: "443"
    pf.server.baseURL: "https://auth.identity.net.br:443"
    MAX_HEAP_SIZE: "2G"
    JAVA_RAM_PERCENTAGE: "80"
    SERVER_PROFILE_UPDATE: "true"
    TAIL_LOG_FILES: "/opt/out/instance/log/server.log /opt/out/instance/log/audit.log"
  image:
    repository: pingidentity
    repositoryFqn:
    name:
    tag: "2305"
    pullPolicy: Always

  privateCert:
    generate: false

#############################################################
# pingfederate-admin values
#############################################################
pingfederate-admin:
  enabled: true
  envs:
    SERVER_PROFILE_URL: https://RaphaelNetbr:ATBBfWbVEZWSryWvbTM44eyxXvA6C4EBB0F7@bitbucket.org/netbr/pingprofiles.git
    SERVER_PROFILE_PATH: profiles/pingfederate
    SERVER_PROFILE_BRANCH: "auth.identity.net.br_prd"

  secretVolumes:
    pingfederate-license:
      items:
        pingfed.lic: "/opt/in/instance/server/default/conf/pingfederate.lic"
 
#############################################################
# pingfederate-engine values
#############################################################
pingfederate-engine:
  enabled: true
  envs:
    SERVER_PROFILE_URL: https://RaphaelNetbr:ATBBfWbVEZWSryWvbTM44eyxXvA6C4EBB0F7@bitbucket.org/netbr/pingprofiles.git
    SERVER_PROFILE_PATH: profiles/pingfederate
    SERVER_PROFILE_BRANCH: "auth.identity.net.br_prd"
  container:
    replicaCount: 1
    resources:
      requests:
        cpu: 1
        memory: 4Gi
      limits:
        cpu: 2
        memory: 4Gi  
  secretVolumes:
    pingfederate-license:
      items:
        pingfed.lic: "/opt/in/instance/server/default/conf/pingfederate.lic"
  workload:
    annotations:
      telegraf.influxdata.com/inputs: |+
        [[inputs.http]]
          urls = ["https://localhost:9031/pf/heartbeat.ping"]
          name_override = "pingfederate_heartbeat"
          data_format = "json"
          insecure_skip_verify = true
      telegraf.influxdata.com/class: prometheus
          ## IF older PF image
          # json_query = "items"
      prometheus.io/scrape: "true"
      prometheus.io/path: /metrics
      prometheus.io/port: "9273"